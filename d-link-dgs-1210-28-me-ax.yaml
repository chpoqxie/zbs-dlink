zabbix_export:
  version: '6.4'
  template_groups:
    - uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    - uuid: 6fe2919b1f9543f9b73a185e1444ed49
      template: 'D-Link DGS-1210-28-ME Ax'
      name: 'D-Link DGS-1210-28-ME Ax'
      description: |
        Основано на "D-Link DES_DGS Switch v6.4"
        - Добавлено закрытие триггера LinkDown, если интерфейс выключен вручную (по AdminStatus).
        - Отключено EtherLike-MIB Discovery - кому сейчас нужна проверка дуплекса? Достаточно детекта снижения скорости на интерфейсе.
        - Firmware Version заносим в inventory - Software
        - из всех имён интерфейсных триггеров убрано ({#IFALIAS})
        - добавлен мониторинг DDM
      groups:
        - name: 'Templates/Network devices'
      items:
        - uuid: 8a636283e3b5418e9e83df8077ec9975
          name: 'ICMP ping'
          type: SIMPLE
          key: icmpping
          history: 1w
          valuemap:
            name: 'Service state'
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: d783d0b52dae4473b165676a329d6d66
              expression: 'max(/D-Link DGS-1210-28-ME Ax/icmpping,#3)=0'
              name: 'Unavailable by ICMP ping'
              priority: HIGH
              description: 'Last three attempts returned timeout.  Please check device connectivity.'
              tags:
                - tag: scope
                  value: availability
        - uuid: aff5f0e224a44ed89154831807ac86c3
          name: 'ICMP loss'
          type: SIMPLE
          key: icmppingloss
          history: 1w
          value_type: FLOAT
          units: '%'
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 312ba25752bc4ac1b5a545f6807f1b38
              expression: 'min(/D-Link DGS-1210-28-ME Ax/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/D-Link DGS-1210-28-ME Ax/icmppingloss,5m)<100'
              name: 'High ICMP ping loss'
              opdata: 'Loss: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                - name: 'Unavailable by ICMP ping'
                  expression: 'max(/D-Link DGS-1210-28-ME Ax/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: 9646a2f4204845b98851749420e427b7
          name: 'ICMP response time'
          type: SIMPLE
          key: icmppingsec
          history: 1w
          value_type: FLOAT
          units: s
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: d06ddd8f811d438bb269b330a717526f
              expression: 'avg(/D-Link DGS-1210-28-ME Ax/icmppingsec,5m)>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'High ICMP ping response time'
              opdata: 'Value: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                - name: 'High ICMP ping loss'
                  expression: 'min(/D-Link DGS-1210-28-ME Ax/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/D-Link DGS-1210-28-ME Ax/icmppingloss,5m)<100'
                - name: 'Unavailable by ICMP ping'
                  expression: 'max(/D-Link DGS-1210-28-ME Ax/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: 1f0a29da97ac4c589f797633cca8f79b
          name: 'SNMP traps (fallback)'
          type: SNMP_TRAP
          key: snmptrap.fallback
          delay: '0'
          history: 2w
          trends: '0'
          value_type: LOG
          description: 'The item is used to collect all SNMP traps unmatched by other snmptrap items'
          logtimefmt: 'hh:mm:sszyyyy/MM/dd'
          tags:
            - tag: component
              value: network
        - uuid: 6c02855f47194497b9747eee7cdd4adf
          name: 'System contact details'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.4.0
          key: 'system.contact[sysContact.0]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed node, together with information on how to contact this person.  If no contact information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: a4572dddba9941be817ba623e3c66ade
          name: 'CPU utilization'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.171.10.76.28.1.100.1.2.0
          key: system.cpu.util
          history: 30d
          units: '%'
          description: |
            DGS-1210-28ME-AX::agentCPUutilizationIn1min.0
            The unit of time is 1 minute. The value will be between 0% (idle) and 100%(very busy).
          tags:
            - tag: component
              value: cpu
          triggers:
            - uuid: bb30a0f7b20f49c29433a5cfdac784fb
              expression: 'min(/D-Link DGS-1210-28-ME Ax/system.cpu.util,5m)>{$CPU.UTIL.CRIT}'
              name: 'High CPU utilization'
              event_name: 'High CPU utilization (over {$CPU.UTIL.CRIT}% for 5m)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: AVERAGE
              description: 'The CPU utilization is too high. The system might be slow to respond.'
              tags:
                - tag: scope
                  value: performance
        - uuid: c6c00dd036a041e2acd897e93b84895e
          name: 'System description'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.1.0
          key: 'system.descr[sysDescr.0]'
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            SNMPv2-MIB::sysDescr.0
            A textual description of the entity.  This value should include the full name and version identification of the system's hardware type, software operating-system, and networking software.
          inventory_link: MODEL
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 2h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 25f95daa4d7544fcace7690138c17ffe
              expression: 'find(/D-Link DGS-1210-28-ME Ax/system.descr[sysDescr.0],,"like",{$SYS.DESCR.1})=0 and find(/D-Link DGS-1210-28-ME Ax/system.descr[sysDescr.0],,"like",{$SYS.DESCR.2})=0 and length(last(/D-Link DGS-1210-28-ME Ax/system.descr[sysDescr.0]))>0'
              name: 'Wrong template attached to switch'
              priority: INFO
        - uuid: c3259148f3494558a6aaabedd91fc136
          name: 'Firmware version'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.16.19.2.0
          key: system.hw.firmware
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: 'RMON2-MIB::probeSoftwareRev.0'
          inventory_link: SOFTWARE
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 551f5aa65699421e891a9a1d0b25393c
              expression: 'last(/D-Link DGS-1210-28-ME Ax/system.hw.firmware,#1)<>last(/D-Link DGS-1210-28-ME Ax/system.hw.firmware,#2) and length(last(/D-Link DGS-1210-28-ME Ax/system.hw.firmware))>0'
              name: 'Firmware has changed'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: INFO
              description: 'Firmware version has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 82544acd41604739abd5b3fbedef13a8
          name: 'Hardware serial number'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.171.10.76.28.1.1.30.0
          key: system.hw.serialnumber
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            DGS-1210-28ME-AX::sysSerialNumber.0
            A text string containing the serial number of this device.
          inventory_link: SERIALNO_A
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 89a603e2107b4af4907674a49df7975c
              expression: 'last(/D-Link DGS-1210-28-ME Ax/system.hw.serialnumber,#1)<>last(/D-Link DGS-1210-28-ME Ax/system.hw.serialnumber,#2) and length(last(/D-Link DGS-1210-28-ME Ax/system.hw.serialnumber))>0'
              name: 'Device has been replaced'
              event_name: 'Device has been replaced (new serial number received)'
              priority: INFO
              description: 'Device serial number has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 8af4436873334fc89d5fff55f0dad1c9
          name: 'Uptime (hardware)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.25.1.1.0
          key: 'system.hw.uptime[hrSystemUptime.0]'
          history: 2w
          trends: '0'
          units: uptime
          description: |
            MIB: HOST-RESOURCES-MIB
            The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.
          preprocessing:
            - type: CHECK_NOT_SUPPORTED
              parameters:
                - ''
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: ad7e39f1bd1e4b9eba72041901c7a070
          name: 'Hardware version (revision)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.16.19.3.0
          key: system.hw.version
          delay: 1h
          history: 2w
          trends: '0'
          value_type: CHAR
          description: 'RMON2-MIB::probeHardwareRev.0'
          inventory_link: HARDWARE
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
        - uuid: 9383e196bab742bf8f7c3ab0c59fcf62
          name: 'System location'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.6.0
          key: 'system.location[sysLocation.0]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The physical location of this node (e.g., `telephone closet, 3rd floor').  If the location is unknown, the value is the zero-length string.
          inventory_link: LOCATION
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 1b1a11b4dd1b44a99362416212d22814
          name: 'MAC address'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.17.1.1.0
          key: system.mac.address
          delay: 1h
          trends: '0'
          value_type: CHAR
          description: 'BRIDGE-MIB::dot1dBaseBridgeAddress.0'
          inventory_link: MACADDRESS_A
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: network
        - uuid: 1521608b929d4b51bf9c4c7d0b334b6f
          name: 'Memory utilization'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.171.10.76.28.1.100.2.2.0
          key: system.mem.util
          history: 30d
          units: '%'
          description: 'DGS-1210-28ME-AX::agentMEMutilizationIn1min.0'
          tags:
            - tag: component
              value: memory
          triggers:
            - uuid: 6f595a4ec7664e42bd456fd8828f72f4
              expression: 'min(/D-Link DGS-1210-28-ME Ax/system.mem.util,5m)>{$MEMORY.UTIL.MAX}'
              name: 'High memory utilization'
              event_name: 'High memory utilization (>{$MEMORY.UTIL.MAX}% for 5m)'
              priority: AVERAGE
              tags:
                - tag: scope
                  value: capacity
                - tag: scope
                  value: performance
        - uuid: 1489bc2424b54ca9b36458634f1e2523
          name: 'System name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.5.0
          key: system.name
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: c0453ac4a3104856863bee1620edda19
              expression: 'last(/D-Link DGS-1210-28-ME Ax/system.name,#1)<>last(/D-Link DGS-1210-28-ME Ax/system.name,#2) and length(last(/D-Link DGS-1210-28-ME Ax/system.name))>0'
              name: 'System name has changed'
              event_name: 'System name has changed (new name: {ITEM.VALUE})'
              priority: INFO
              description: 'The name of the system has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
                - tag: scope
                  value: security
        - uuid: eefb0f3a3ab845be840d1d7002776316
          name: 'Uptime (network)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: 'system.net.uptime[sysUpTime.0]'
          history: 2w
          trends: '0'
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            The time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 5e6d588aaf6b4f3cb49b3c3153d7e53b
          name: 'System object ID'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.2.0
          key: 'system.objectid[sysObjectID.0]'
          delay: 15m
          history: 2w
          trends: '0'
          value_type: CHAR
          description: |
            MIB: SNMPv2-MIB
            The vendor's authoritative identification of the network management subsystem contained in the entity.  This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 9f057136556c493491b3333a19474b76
          name: 'SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          history: 7d
          description: |
            Availability of SNMP checks on the host. The value of this item corresponds to availability icons in the host list.
            Possible value:
            0 - not available
            1 - available
            2 - unknown
          valuemap:
            name: zabbix.host.available
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 9fd72af0874249cdb9f4b9b5d4fb8fba
              expression: 'max(/D-Link DGS-1210-28-ME Ax/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              name: 'No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
              dependencies:
                - name: 'Unavailable by ICMP ping'
                  expression: 'max(/D-Link DGS-1210-28-ME Ax/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: 762cf15d67254b98b2c2171986f85d59
          name: 'SFP discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SFPPORT},1.3.6.1.4.1.171.10.76.28.1.104.1.1.1,{#SFPCHK},1.3.6.1.2.1.31.1.1.1.18]'
          key: dlink.sfp.discovery
          delay: 6h
          filter:
            conditions:
              - macro: '{#SFPCHK}'
                value: '{$SFPCHK.MATCHES}'
                formulaid: A
          lifetime: 3d
          description: 'Для включения этой проверки надо вписать в дескрипшен порта слово "spy". Подразумевается, что индекс ifAlias''а порта с этим словом и индекс порта с SFP совпадают. Если нет - нужно пересчитывать snmpindex.'
          item_prototypes:
            - uuid: e6d8abf58c80462e954061982a9739cc
              name: 'SFP {#SFPPORT}: DDM bias current'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.10.76.28.1.105.2.1.1.1.4.{#SNMPINDEX}'
              key: 'sfp[ddmBiasCurrent.{#SNMPINDEX}]'
              delay: 10m
              value_type: FLOAT
              units: mA
              description: 'DGS-1210-28ME-AX::ddmBiasCurrent'
              preprocessing:
                - type: MATCHES_REGEX
                  parameters:
                    - '[-]?[0-9.]+'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
            - uuid: 581b3a9a953e4f2d9ecc7c4ce6d713c7
              name: 'SFP {#SFPPORT}: DDM RX power low warning threshold'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.10.76.28.1.105.1.3.1.6.{#SNMPINDEX}.4'
              key: 'sfp[ddmLowWarnRX.{#SNMPINDEX}]'
              delay: 2h
              value_type: FLOAT
              units: dBm
              description: 'DGS-1210-28ME-AX::ddmLowWarning.{PORT}.rxPower'
              preprocessing:
                - type: MATCHES_REGEX
                  parameters:
                    - '[-]?[0-9.]+'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '-40'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
            - uuid: e82e928d494a4321b58d2d7f10ee53ee
              name: 'SFP {#SFPPORT}: DDM TX power low warning threshold'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.10.76.28.1.105.1.3.1.6.{#SNMPINDEX}.3'
              key: 'sfp[ddmLowWarnTX.{#SNMPINDEX}]'
              delay: 2h
              value_type: FLOAT
              units: dBm
              description: 'DGS-1210-28ME-AX::ddmLowWarning.{PORT}.txPower'
              preprocessing:
                - type: MATCHES_REGEX
                  parameters:
                    - '[-]?[0-9.]+'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '-40'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
            - uuid: ff8d5b9f3b1f4828b3e947e074c65600
              name: 'SFP {#SFPPORT}: DDM RX power'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.10.76.28.1.105.2.1.1.1.6.{#SNMPINDEX}'
              key: 'sfp[ddmRxPower.{#SNMPINDEX}]'
              delay: 10m
              value_type: FLOAT
              units: dBm
              description: 'DGS-1210-28ME-AX::ddmRxPower'
              preprocessing:
                - type: MATCHES_REGEX
                  parameters:
                    - '[-]?[0-9.]+'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '-40'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
            - uuid: 56024162b5044f359681a17ca16c2d97
              name: 'SFP {#SFPPORT}: DDM temperature'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.10.76.28.1.105.2.1.1.1.2.{#SNMPINDEX}'
              key: 'sfp[ddmTemperature.{#SNMPINDEX}]'
              delay: 10m
              value_type: FLOAT
              units: C
              description: 'DGS-1210-28ME-AX::ddmTemperature'
              preprocessing:
                - type: STR_REPLACE
                  parameters:
                    - +
                    - ''
                - type: MATCHES_REGEX
                  parameters:
                    - '[-]?[0-9.]+'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
            - uuid: 75eb1ca6d50646c2b6e0f35b6c5d0680
              name: 'SFP {#SFPPORT}: DDM TX power'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.10.76.28.1.105.2.1.1.1.5.{#SNMPINDEX}'
              key: 'sfp[ddmTxPower.{#SNMPINDEX}]'
              delay: 10m
              value_type: FLOAT
              units: dBm
              description: 'DGS-1210-28ME-AX::ddmTxPower'
              preprocessing:
                - type: MATCHES_REGEX
                  parameters:
                    - '[-]?[0-9.]+'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '-40'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
            - uuid: c5a87731b27b4fd784a4b9171d677449
              name: 'SFP {#SFPPORT}: DDM voltage'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.10.76.28.1.105.2.1.1.1.3.{#SNMPINDEX}'
              key: 'sfp[ddmVoltage.{#SNMPINDEX}]'
              delay: 10m
              value_type: FLOAT
              units: V
              description: 'DGS-1210-28ME-AX::ddmVoltage'
              preprocessing:
                - type: MATCHES_REGEX
                  parameters:
                    - '[-]?[0-9.]+'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 12h
            - uuid: 99346a76173041879e9d86a98f6178a7
              name: 'SFP {#SFPPORT}: SFP vendor P/N'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.10.76.28.1.104.1.1.7.{#SNMPINDEX}'
              key: 'sfp[VendorPN.{#SNMPINDEX}]'
              delay: 1h
              trends: '0'
              value_type: CHAR
              description: 'DGS-1210-28ME-AX::sfpVendorPn'
              preprocessing:
                - type: NOT_MATCHES_REGEX
                  parameters:
                    - (^Reading)
                  error_handler: DISCARD_VALUE
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
            - uuid: 0476a1c4d77f448da2563fff71475079
              name: 'SFP {#SFPPORT}: SFP serial'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.10.76.28.1.104.1.1.10.{#SNMPINDEX}'
              key: 'sfp[VendorSN.{#SNMPINDEX}]'
              delay: 1h
              trends: '0'
              value_type: CHAR
              description: 'DGS-1210-28ME-AX::sfpVendorSn'
              preprocessing:
                - type: NOT_MATCHES_REGEX
                  parameters:
                    - (^Reading)
                  error_handler: DISCARD_VALUE
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              trigger_prototypes:
                - uuid: 2261e829d0ab4266a4a4cadeca64e53a
                  expression: 'last(/D-Link DGS-1210-28-ME Ax/sfp[VendorSN.{#SNMPINDEX}],#2)<>last(/D-Link DGS-1210-28-ME Ax/sfp[VendorSN.{#SNMPINDEX}],#1) and length(last(/D-Link DGS-1210-28-ME Ax/sfp[VendorSN.{#SNMPINDEX}],#1))>0 and length(last(/D-Link DGS-1210-28-ME Ax/sfp[VendorSN.{#SNMPINDEX}],#2))>0'
                  name: 'SFP {#SFPPORT}: module changed'
                  priority: INFO
                  manual_close: 'YES'
          trigger_prototypes:
            - uuid: 4cc8d5dfb9ee48c8aa3063bb781a75ba
              expression: 'last(/D-Link DGS-1210-28-ME Ax/sfp[ddmRxPower.{#SNMPINDEX}])<=last(/D-Link DGS-1210-28-ME Ax/sfp[ddmLowWarnRX.{#SNMPINDEX}]) and nodata(/D-Link DGS-1210-28-ME Ax/sfp[ddmRxPower.{#SNMPINDEX}],12h)<>1 and last(/D-Link DGS-1210-28-ME Ax/sfp[ddmLowWarnRX.{#SNMPINDEX}])<>-40 and last(/D-Link DGS-1210-28-ME Ax/sfp[ddmRxPower.{#SNMPINDEX}])<>-40'
              name: 'SFP {#SFPPORT}: RX level is less than Low Warning'
              priority: WARNING
        - uuid: dda010f299ce4917a229489af4c46f2c
          name: 'FAN Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.171.12.11.1.7.1.2,{#STATUS},1.3.6.1.4.1.171.12.11.1.7.1.3]'
          key: fan.discovery
          delay: 12h
          status: DISABLED
          filter:
            conditions:
              - macro: '{#STATUS}'
                value: '[^0]'
                formulaid: A
          description: 'swFanID of EQUIPMENT-MIB::swFanTable'
          item_prototypes:
            - uuid: d06a677876f849e38aedf743d488cfc4
              name: '#{#SNMPVALUE}: Fan status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.12.11.1.7.1.3.{#SNMPINDEX}'
              key: 'sensor.fan.status[swFanStatus.{#SNMPINDEX}]'
              delay: 3m
              history: 2w
              trends: '0'
              description: |
                MIB: EQUIPMENT-MIB
                Indicates the current fan status.
                speed-0     : If the fan function is normal and the fan does not spin            due to the temperature not  reaching the threshold, the status of the fan is speed 0.
                speed-low   : Fan spin using the lowest speed.
                speed-middle: Fan spin using the middle speed.
                speed-high  : Fan spin using the highest speed.
              valuemap:
                name: 'EQUIPMENT-MIB::swFanStatus'
              tags:
                - tag: component
                  value: fan
              trigger_prototypes:
                - uuid: 32f4e1de2ac044beb7d43c6aed42a3da
                  expression: 'count(/D-Link DGS-1210-28-ME Ax/sensor.fan.status[swFanStatus.{#SNMPINDEX}],#1,"eq","{$FAN_CRIT_STATUS}")=1'
                  name: '#{#SNMPVALUE}: Fan is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the fan unit'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
        - uuid: 8960e2597173429ab99e0d0d01234a32
          name: 'Memory Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.171.12.1.1.9.1.1]'
          key: memory.discovery
          delay: 12h
          status: DISABLED
          item_prototypes:
            - uuid: b817a6a3f9c74beaba316d99391968c5
              name: '#{#SNMPVALUE}: Memory utilization'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.12.1.1.9.1.4.{#SNMPINDEX}'
              key: 'vm.memory.util[agentDRAMutilization.{#SNMPINDEX}]'
              history: 7d
              value_type: FLOAT
              units: '%'
              description: |
                MIB: DLINK-AGENT-MIB
                The percentage of used DRAM memory of the total DRAM memory available.The value will be between 0%(idle) and 100%(very busy)
              tags:
                - tag: component
                  value: memory
              trigger_prototypes:
                - uuid: 5cb0a3d05b134a0a8b57fd2482989235
                  expression: 'min(/D-Link DGS-1210-28-ME Ax/vm.memory.util[agentDRAMutilization.{#SNMPINDEX}],5m)>{$MEMORY.UTIL.MAX}'
                  name: '#{#SNMPVALUE}: High memory utilization'
                  event_name: '#{#SNMPVALUE}: High memory utilization (>{$MEMORY.UTIL.MAX}% for 5m)'
                  priority: AVERAGE
                  description: 'The system is running out of free memory.'
                  tags:
                    - tag: scope
                      value: capacity
                    - tag: scope
                      value: performance
          graph_prototypes:
            - uuid: 241417d0af2d44f9af844c41bb26d80f
              name: '#{#SNMPVALUE}: Memory utilization'
              ymin_type_1: FIXED
              ymax_type_1: FIXED
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'D-Link DGS-1210-28-ME Ax'
                    key: 'vm.memory.util[agentDRAMutilization.{#SNMPINDEX}]'
        - uuid: 17c85782fb11406cb5a67faf31336788
          name: 'Network interfaces discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#IFOPERSTATUS},1.3.6.1.2.1.2.2.1.8,{#IFADMINSTATUS},1.3.6.1.2.1.2.2.1.7,{#IFALIAS},1.3.6.1.2.1.31.1.1.1.18,{#IFNAME},1.3.6.1.2.1.31.1.1.1.1,{#IFDESCR},1.3.6.1.2.1.2.2.1.2,{#IFTYPE},1.3.6.1.2.1.2.2.1.3]'
          key: net.if.discovery
          delay: 6h
          filter:
            evaltype: AND
            conditions:
              - macro: '{#IFADMINSTATUS}'
                value: '{$NET.IF.IFADMINSTATUS.MATCHES}'
                formulaid: A
              - macro: '{#IFADMINSTATUS}'
                value: '{$NET.IF.IFADMINSTATUS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
              - macro: '{#IFALIAS}'
                value: '{$NET.IF.IFALIAS.MATCHES}'
                formulaid: C
              - macro: '{#IFALIAS}'
                value: '{$NET.IF.IFALIAS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: D
              - macro: '{#IFDESCR}'
                value: '{$NET.IF.IFDESCR.MATCHES}'
                formulaid: E
              - macro: '{#IFDESCR}'
                value: '{$NET.IF.IFDESCR.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: F
              - macro: '{#IFNAME}'
                value: '{$NET.IF.IFNAME.MATCHES}'
                formulaid: G
              - macro: '{#IFNAME}'
                value: '{$NET.IF.IFNAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: H
              - macro: '{#IFOPERSTATUS}'
                value: '{$NET.IF.IFOPERSTATUS.MATCHES}'
                formulaid: I
              - macro: '{#IFOPERSTATUS}'
                value: '{$NET.IF.IFOPERSTATUS.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: J
              - macro: '{#IFTYPE}'
                value: '{$NET.IF.IFTYPE.MATCHES}'
                formulaid: K
              - macro: '{#IFTYPE}'
                value: '{$NET.IF.IFTYPE.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: L
          lifetime: 3d
          description: 'Discovering interfaces from IF-MIB.'
          item_prototypes:
            - uuid: 60bdd1413e674e099feeef99859cf5df
              name: 'Interface {#IFNAME}({#IFALIAS}): Inbound packets discarded'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.13.{#SNMPINDEX}'
              key: 'net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              description: |
                MIB: IF-MIB
                The number of inbound packets which were chosen to be discarded
                even though no errors had been detected to prevent their being deliverable to a higher-layer protocol.
                One possible reason for discarding such a packet could be to free up buffer space.
                Discontinuities in the value of this counter can occur at re-initialization of the management system,
                and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 9cf3e72b22a54d28a9fc26d6aa8382ff
              name: 'Interface {#IFNAME}({#IFALIAS}): Inbound packets with errors'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.14.{#SNMPINDEX}'
              key: 'net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              description: |
                MIB: IF-MIB
                For packet-oriented interfaces, the number of inbound packets that contained errors preventing them from being deliverable to a higher-layer protocol.  For character-oriented or fixed-length interfaces, the number of inbound transmission units that contained errors preventing them from being deliverable to a higher-layer protocol. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 3c2ae7626fec459fbdf7403c58e78d4a
              name: 'Interface {#IFNAME}({#IFALIAS}): Bits received'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.6.{#SNMPINDEX}'
              key: 'net.if.in[ifHCInOctets.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              units: bps
              description: |
                MIB: IF-MIB
                The total number of octets received on the interface, including framing characters. This object is a 64-bit version of ifInOctets. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                - type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 3eb848cfee5a44f788b2b0fff74132f2
              name: 'Interface {#IFNAME}({#IFALIAS}): Outbound packets discarded'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.19.{#SNMPINDEX}'
              key: 'net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              description: |
                MIB: IF-MIB
                The number of outbound packets which were chosen to be discarded
                even though no errors had been detected to prevent their being deliverable to a higher-layer protocol.
                One possible reason for discarding such a packet could be to free up buffer space.
                Discontinuities in the value of this counter can occur at re-initialization of the management system,
                and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 84e9d87b3eab4fcaa50eb0ca8b10a915
              name: 'Interface {#IFNAME}({#IFALIAS}): Outbound packets with errors'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.20.{#SNMPINDEX}'
              key: 'net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              description: |
                MIB: IF-MIB
                For packet-oriented interfaces, the number of outbound packets that contained errors preventing them from being deliverable to a higher-layer protocol.  For character-oriented or fixed-length interfaces, the number of outbound transmission units that contained errors preventing them from being deliverable to a higher-layer protocol. Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 872f3d2be3ae408f947ab8864ed76d38
              name: 'Interface {#IFNAME}({#IFALIAS}): Bits sent'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.10.{#SNMPINDEX}'
              key: 'net.if.out[ifHCOutOctets.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              units: bps
              description: |
                MIB: IF-MIB
                The total number of octets transmitted out of the interface, including framing characters. This object is a 64-bit version of ifOutOctets.Discontinuities in the value of this counter can occur at re-initialization of the management system, and at other times as indicated by the value of ifCounterDiscontinuityTime.
              preprocessing:
                - type: CHANGE_PER_SECOND
                  parameters:
                    - ''
                - type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 1f1df1b0799d48a6811c9b868d2a89bb
              name: 'Interface {#IFNAME}({#IFALIAS}): Speed'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.31.1.1.1.15.{#SNMPINDEX}'
              key: 'net.if.speed[ifHighSpeed.{#SNMPINDEX}]'
              delay: 5m
              history: 7d
              trends: '0'
              units: bps
              description: |
                MIB: IF-MIB
                An estimate of the interface's current bandwidth in units of 1,000,000 bits per second. If this object reports a value of `n' then the speed of the interface is somewhere in the range of `n-500,000' to`n+499,999'.  For interfaces which do not vary in bandwidth or for those where no accurate estimation can be made, this object should contain the nominal bandwidth. For a sub-layer which has no concept of bandwidth, this object should be zero.
              preprocessing:
                - type: MULTIPLIER
                  parameters:
                    - '1000000'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 0e4a4c8fb8e247d6840b526f1751046e
              name: 'Interface {#IFNAME}({#IFALIAS}): Admin status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.7.{#SNMPINDEX}'
              key: 'net.if.status[ifAdminStatus.{#SNMPINDEX}]'
              delay: 5m
              trends: '0'
              description: 'The desired state of the interface.  The testing(3) state indicates that no operational packets can be passed.  When a managed system initializes, all interfaces start with ifAdminStatus in the down(2) state.  As a result of either explicit management action or per configuration information retained by the managed system, ifAdminStatus is then changed to either the up(1) or testing(3) states (or remains in the down(2) state)."'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 3bfebc725cc3409e9a15a2a28de89a85
              name: 'Interface {#IFNAME}({#IFALIAS}): Operational status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}'
              key: 'net.if.status[ifOperStatus.{#SNMPINDEX}]'
              history: 7d
              trends: '0'
              description: |
                MIB: IF-MIB
                The current operational state of the interface.
                - The testing(3) state indicates that no operational packet scan be passed
                - If ifAdminStatus is down(2) then ifOperStatus should be down(2)
                - If ifAdminStatus is changed to up(1) then ifOperStatus should change to up(1) if the interface is ready to transmit and receive network traffic
                - It should change todormant(5) if the interface is waiting for external actions (such as a serial line waiting for an incoming connection)
                - It should remain in the down(2) state if and only if there is a fault that prevents it from going to the up(1) state
                - It should remain in the notPresent(6) state if the interface has missing(typically, hardware) components.
              valuemap:
                name: 'IF-MIB::ifOperStatus'
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
            - uuid: 522f1e1e2db040b78e617c8a1bda2593
              name: 'Interface {#IFNAME}({#IFALIAS}): Interface type'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.3.{#SNMPINDEX}'
              key: 'net.if.type[ifType.{#SNMPINDEX}]'
              delay: 1h
              history: 7d
              trends: '0'
              description: |
                MIB: IF-MIB
                The type of interface.
                Additional values for ifType are assigned by the Internet Assigned Numbers Authority (IANA),
                through updating the syntax of the IANAifType textual convention.
              valuemap:
                name: 'IF-MIB::ifType'
              preprocessing:
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1d
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
          trigger_prototypes:
            - uuid: a351748a0da2479a82f49e79a9d6f9ec
              expression: |
                change(/D-Link DGS-1210-28-ME Ax/net.if.speed[ifHighSpeed.{#SNMPINDEX}])<0 and last(/D-Link DGS-1210-28-ME Ax/net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0
                and (
                last(/D-Link DGS-1210-28-ME Ax/net.if.type[ifType.{#SNMPINDEX}])=6 or
                last(/D-Link DGS-1210-28-ME Ax/net.if.type[ifType.{#SNMPINDEX}])=7 or
                last(/D-Link DGS-1210-28-ME Ax/net.if.type[ifType.{#SNMPINDEX}])=11 or
                last(/D-Link DGS-1210-28-ME Ax/net.if.type[ifType.{#SNMPINDEX}])=62 or
                last(/D-Link DGS-1210-28-ME Ax/net.if.type[ifType.{#SNMPINDEX}])=69 or
                last(/D-Link DGS-1210-28-ME Ax/net.if.type[ifType.{#SNMPINDEX}])=117
                )
                and
                (last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2)
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                (change(/D-Link DGS-1210-28-ME Ax/net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0 and last(/D-Link DGS-1210-28-ME Ax/net.if.speed[ifHighSpeed.{#SNMPINDEX}],#2)>0) or
                (last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])=2)
              name: 'Interface {#IFNAME}: Ethernet has changed to lower speed than it was before'
              opdata: 'Current reported speed: {ITEM.LASTVALUE1}'
              priority: INFO
              description: 'This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              dependencies:
                - name: 'Interface {#IFNAME}: Link down'
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_expression: 'last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$IFCONTROL:"{#IFNAME}"}=0 or last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifAdminStatus.{#SNMPINDEX}])=2'
              tags:
                - tag: scope
                  value: performance
            - uuid: c53832da1534407f92e90a48f310b21d
              expression: |
                (avg(/D-Link DGS-1210-28-ME Ax/net.if.in[ifHCInOctets.{#SNMPINDEX}],15m)>({$IF.UTIL.MAX:"{#IFNAME}"}/100)*last(/D-Link DGS-1210-28-ME Ax/net.if.speed[ifHighSpeed.{#SNMPINDEX}]) or
                avg(/D-Link DGS-1210-28-ME Ax/net.if.out[ifHCOutOctets.{#SNMPINDEX}],15m)>({$IF.UTIL.MAX:"{#IFNAME}"}/100)*last(/D-Link DGS-1210-28-ME Ax/net.if.speed[ifHighSpeed.{#SNMPINDEX}])) and
                last(/D-Link DGS-1210-28-ME Ax/net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                avg(/D-Link DGS-1210-28-ME Ax/net.if.in[ifHCInOctets.{#SNMPINDEX}],15m)<(({$IF.UTIL.MAX:"{#IFNAME}"}-3)/100)*last(/D-Link DGS-1210-28-ME Ax/net.if.speed[ifHighSpeed.{#SNMPINDEX}]) and
                avg(/D-Link DGS-1210-28-ME Ax/net.if.out[ifHCOutOctets.{#SNMPINDEX}],15m)<(({$IF.UTIL.MAX:"{#IFNAME}"}-3)/100)*last(/D-Link DGS-1210-28-ME Ax/net.if.speed[ifHighSpeed.{#SNMPINDEX}])
              name: 'Interface {#IFNAME}: High bandwidth usage'
              event_name: 'Interface {#IFNAME}({#IFALIAS}): High bandwidth usage (>{$IF.UTIL.MAX:"{#IFNAME}"}%)'
              opdata: 'In: {ITEM.LASTVALUE1}, out: {ITEM.LASTVALUE3}, speed: {ITEM.LASTVALUE2}'
              priority: WARNING
              description: 'The utilization of the network interface is close to its estimated maximum bandwidth.'
              manual_close: 'YES'
              dependencies:
                - name: 'Interface {#IFNAME}: Link down'
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_expression: 'last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$IFCONTROL:"{#IFNAME}"}=0 or last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifAdminStatus.{#SNMPINDEX}])=2'
              tags:
                - tag: scope
                  value: performance
            - uuid: fb60dc94be8249638fb3bf9ec4ad62f6
              expression: |
                min(/D-Link DGS-1210-28-ME Ax/net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)>{$IF.ERRORS.WARN:"{#IFNAME}"}
                or min(/D-Link DGS-1210-28-ME Ax/net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)>{$IF.ERRORS.WARN:"{#IFNAME}"}
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: |
                max(/D-Link DGS-1210-28-ME Ax/net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)<{$IF.ERRORS.WARN:"{#IFNAME}"}*0.8
                and max(/D-Link DGS-1210-28-ME Ax/net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)<{$IF.ERRORS.WARN:"{#IFNAME}"}*0.8
              name: 'Interface {#IFNAME}: High error rate'
              event_name: 'Interface {#IFNAME}({#IFALIAS}): High error rate (>{$IF.ERRORS.WARN:"{#IFNAME}"} for 5m)'
              opdata: 'errors in: {ITEM.LASTVALUE1}, errors out: {ITEM.LASTVALUE2}'
              priority: WARNING
              description: 'It recovers when it is below 80% of the `{$IF.ERRORS.WARN:"{#IFNAME}"}` threshold.'
              manual_close: 'YES'
              dependencies:
                - name: 'Interface {#IFNAME}: Link down'
                  expression: '{$IFCONTROL:"{#IFNAME}"}=1 and last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
                  recovery_expression: 'last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$IFCONTROL:"{#IFNAME}"}=0 or last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifAdminStatus.{#SNMPINDEX}])=2'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
            - uuid: 3cfd777bb646402bb9624610ec15a378
              expression: '{$IFCONTROL:"{#IFNAME}"}=1 and last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}],#2))'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$IFCONTROL:"{#IFNAME}"}=0 or last(/D-Link DGS-1210-28-ME Ax/net.if.status[ifAdminStatus.{#SNMPINDEX}])=2'
              name: 'Interface {#IFNAME}: Link down'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: AVERAGE
              description: |
                This trigger expression works as follows:
                1. It can be triggered if the operations status is down.
                2. `{$IFCONTROL:"{#IFNAME}"}=1` - a user can redefine context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down.
                3. `{TEMPLATE_NAME:METRIC.diff()}=1` - the trigger fires only if the operational status was up to (1) sometime before (so, do not fire for the 'eternal off' interfaces.)
                
                WARNING: if closed manually - it will not fire again on the next poll, because of .diff.
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: availability
          graph_prototypes:
            - uuid: 23e9eae1ff9942ca8363289da19c24ff
              name: 'Interface {#IFNAME}({#IFALIAS}): Network traffic'
              graph_items:
                - drawtype: GRADIENT_LINE
                  color: 199C0D
                  item:
                    host: 'D-Link DGS-1210-28-ME Ax'
                    key: 'net.if.in[ifHCInOctets.{#SNMPINDEX}]'
                - sortorder: '1'
                  drawtype: BOLD_LINE
                  color: F63100
                  item:
                    host: 'D-Link DGS-1210-28-ME Ax'
                    key: 'net.if.out[ifHCOutOctets.{#SNMPINDEX}]'
                - sortorder: '2'
                  color: 00611C
                  yaxisside: RIGHT
                  item:
                    host: 'D-Link DGS-1210-28-ME Ax'
                    key: 'net.if.out.errors[ifOutErrors.{#SNMPINDEX}]'
                - sortorder: '3'
                  color: F7941D
                  yaxisside: RIGHT
                  item:
                    host: 'D-Link DGS-1210-28-ME Ax'
                    key: 'net.if.in.errors[ifInErrors.{#SNMPINDEX}]'
                - sortorder: '4'
                  color: FC6EA3
                  yaxisside: RIGHT
                  item:
                    host: 'D-Link DGS-1210-28-ME Ax'
                    key: 'net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]'
                - sortorder: '5'
                  color: 6C59DC
                  yaxisside: RIGHT
                  item:
                    host: 'D-Link DGS-1210-28-ME Ax'
                    key: 'net.if.in.discards[ifInDiscards.{#SNMPINDEX}]'
        - uuid: 5deca6554a1b45829cf934d4638227a0
          name: 'EtherLike-MIB Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.2.1.10.7.2.1.19,{#IFOPERSTATUS},1.3.6.1.2.1.2.2.1.8,{#IFALIAS},1.3.6.1.2.1.31.1.1.1.18,{#IFNAME},1.3.6.1.2.1.31.1.1.1.1,{#IFDESCR},1.3.6.1.2.1.2.2.1.2]'
          key: net.if.duplex.discovery
          delay: 6h
          status: DISABLED
          filter:
            evaltype: AND
            conditions:
              - macro: '{#IFOPERSTATUS}'
                value: '1'
                formulaid: A
              - macro: '{#SNMPVALUE}'
                value: (2|3)
                formulaid: B
          lifetime: 3d
          description: 'Discovering interfaces from IF-MIB and EtherLike-MIB. Interfaces with up(1) Operational Status are discovered.'
          item_prototypes:
            - uuid: 06ee13a3d063441ab193f30d0f93852b
              name: 'Interface {#IFNAME}({#IFALIAS}): Duplex status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.10.7.2.1.19.{#SNMPINDEX}'
              key: 'net.if.duplex[dot3StatsDuplexStatus.{#SNMPINDEX}]'
              history: 7d
              description: |
                MIB: EtherLike-MIB
                The current mode of operation of the MAC
                entity.  'unknown' indicates that the current
                duplex mode could not be determined.
                
                Management control of the duplex mode is
                accomplished through the MAU MIB.  When
                an interface does not support autonegotiation,
                or when autonegotiation is not enabled, the
                duplex mode is controlled using
                ifMauDefaultType.  When autonegotiation is
                supported and enabled, duplex mode is controlled
                using ifMauAutoNegAdvertisedBits.  In either
                case, the currently operating duplex mode is
                reflected both in this object and in ifMauType.
                
                Note that this object provides redundant
                information with ifMauType.  Normally, redundant
                objects are discouraged.  However, in this
                instance, it allows a management application to
                determine the duplex status of an interface
                without having to know every possible value of
                ifMauType.  This was felt to be sufficiently
                valuable to justify the redundancy.
                Reference: [IEEE 802.3 Std.], 30.3.1.1.32,aDuplexStatus.
              valuemap:
                name: 'EtherLike-MIB::dot3StatsDuplexStatus'
              tags:
                - tag: component
                  value: network
                - tag: description
                  value: '{#IFALIAS}'
                - tag: interface
                  value: '{#IFNAME}'
              trigger_prototypes:
                - uuid: c1a4056f1cd849939d64ef13b758ec37
                  expression: 'last(/D-Link DGS-1210-28-ME Ax/net.if.duplex[dot3StatsDuplexStatus.{#SNMPINDEX}])=2'
                  name: 'Interface {#IFNAME}: In half-duplex mode'
                  priority: WARNING
                  description: 'Please check autonegotiation settings and cabling'
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: performance
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  try {
                      var data = JSON.parse(value);
                  }
                  catch (error) {
                      throw 'Failed to parse JSON of EtherLike-MIB discovery.';
                  }
                  var fields = ['{#SNMPVALUE}','{#IFOPERSTATUS}','{#IFALIAS}','{#IFNAME}','{#IFDESCR}'];
                  data.forEach(function (element) {
                      fields.forEach(function (field) {
                          element[field] = element[field] || '';
                      });
                  });
                  return JSON.stringify(data);
        - uuid: fa15000ba91e45fd83e99e948612a553
          name: 'PSU Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.171.12.11.1.6.1.2,{#STATUS},1.3.6.1.4.1.171.12.11.1.6.1.3]'
          key: psu.discovery
          delay: 12h
          status: DISABLED
          filter:
            conditions:
              - macro: '{#STATUS}'
                value: '[^0]'
                formulaid: A
          description: 'swPowerID of EQUIPMENT-MIB::swPowerTable'
          item_prototypes:
            - uuid: 6cfb71cc810142e78259ef7a8bc2b07f
              name: '#{#SNMPVALUE}: Power supply status'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.12.11.1.6.1.3.{#SNMPINDEX}'
              key: 'sensor.psu.status[swPowerStatus.{#SNMPINDEX}]'
              delay: 3m
              history: 2w
              trends: '0'
              description: |
                MIB: EQUIPMENT-MIB
                Indicates the current power status.
                lowVoltage : The voltage of the power unit is too low.
                overCurrent: The current of the power unit is too high.
                working    : The power unit is working normally.
                fail       : The power unit has failed.
                connect    : The power unit is connected but not powered on.
                disconnect : The power unit is not connected.
              valuemap:
                name: 'EQUIPMENT-MIB::swPowerStatus'
              tags:
                - tag: component
                  value: power
              trigger_prototypes:
                - uuid: 3c03b1be64da4e1096cbd66e25ace3c4
                  expression: 'count(/D-Link DGS-1210-28-ME Ax/sensor.psu.status[swPowerStatus.{#SNMPINDEX}],#1,"eq","{$PSU_CRIT_STATUS}")=1'
                  name: '#{#SNMPVALUE}: Power supply is in critical state'
                  opdata: 'Current state: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  description: 'Please check the power supply unit for errors'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
        - uuid: 5985b318002d4a2fba0a95765769ec6d
          name: 'Temperature Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SNMPVALUE},1.3.6.1.4.1.171.12.11.1.8.1.1]'
          key: temperature.discovery
          delay: 12h
          status: DISABLED
          description: 'EQUIPMENT-MIB::swTemperatureUnitIndex'
          item_prototypes:
            - uuid: 8799878191a549d89582f0d445adf2c5
              name: '#{#SNMPVALUE}: Temperature'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.171.12.11.1.8.1.2.{#SNMPINDEX}'
              key: 'sensor.temp.value[swTemperatureCurrent.{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              value_type: FLOAT
              units: °C
              description: |
                MIB: EQUIPMENT-MIB
                The shelf current temperature.
              tags:
                - tag: component
                  value: temperature
              trigger_prototypes:
                - uuid: a6ae29422a834f0c9ae9d704906aaeba
                  expression: 'avg(/D-Link DGS-1210-28-ME Ax/sensor.temp.value[swTemperatureCurrent.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"{#SNMPVALUE}"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/D-Link DGS-1210-28-ME Ax/sensor.temp.value[swTemperatureCurrent.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"{#SNMPVALUE}"}-3'
                  name: '#{#SNMPVALUE}: Temperature is above critical threshold'
                  event_name: '#{#SNMPVALUE}: Temperature is above critical threshold: >{$TEMP_CRIT:"{#SNMPVALUE}"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: HIGH
                  description: 'This trigger uses temperature sensor values as well as temperature sensor status if available'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
                - uuid: 35e223e69b564e71898ea6c79da3706d
                  expression: 'avg(/D-Link DGS-1210-28-ME Ax/sensor.temp.value[swTemperatureCurrent.{#SNMPINDEX}],5m)>{$TEMP_WARN:"{#SNMPVALUE}"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'max(/D-Link DGS-1210-28-ME Ax/sensor.temp.value[swTemperatureCurrent.{#SNMPINDEX}],5m)<{$TEMP_WARN:"{#SNMPVALUE}"}-3'
                  name: '#{#SNMPVALUE}: Temperature is above warning threshold'
                  event_name: '#{#SNMPVALUE}: Temperature is above warning threshold: >{$TEMP_WARN:"{#SNMPVALUE}"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: WARNING
                  description: 'This trigger uses temperature sensor values as well as temperature sensor status if available'
                  dependencies:
                    - name: '#{#SNMPVALUE}: Temperature is above critical threshold'
                      expression: 'avg(/D-Link DGS-1210-28-ME Ax/sensor.temp.value[swTemperatureCurrent.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"{#SNMPVALUE}"}'
                      recovery_expression: 'max(/D-Link DGS-1210-28-ME Ax/sensor.temp.value[swTemperatureCurrent.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"{#SNMPVALUE}"}-3'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
                - uuid: bf9916c3ae984ff8a0c4048041977c07
                  expression: 'avg(/D-Link DGS-1210-28-ME Ax/sensor.temp.value[swTemperatureCurrent.{#SNMPINDEX}],5m)<{$TEMP_CRIT_LOW:"{#SNMPVALUE}"}'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'min(/D-Link DGS-1210-28-ME Ax/sensor.temp.value[swTemperatureCurrent.{#SNMPINDEX}],5m)>{$TEMP_CRIT_LOW:"{#SNMPVALUE}"}+3'
                  name: '#{#SNMPVALUE}: Temperature is too low'
                  event_name: '#{#SNMPVALUE}: Temperature is too low: <{$TEMP_CRIT_LOW:"{#SNMPVALUE}"}'
                  opdata: 'Current value: {ITEM.LASTVALUE1}'
                  priority: AVERAGE
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
      tags:
        - tag: class
          value: network
        - tag: target
          value: dlink
      macros:
        - macro: '{$CPU.UTIL.CRIT}'
          value: '90'
        - macro: '{$FAN_CRIT_STATUS}'
          value: '2'
        - macro: '{$ICMP_LOSS_WARN}'
          value: '20'
        - macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '0.15'
        - macro: '{$IF.ERRORS.WARN}'
          value: '2'
        - macro: '{$IF.UTIL.MAX}'
          value: '90'
        - macro: '{$IFCONTROL}'
          value: '1'
        - macro: '{$MEMORY.UTIL.MAX}'
          value: '97'
        - macro: '{$NET.IF.IFADMINSTATUS.MATCHES}'
          value: '^.*'
        - macro: '{$NET.IF.IFADMINSTATUS.NOT_MATCHES}'
          value: ^2$
          description: 'Ignore down(2) administrative status'
        - macro: '{$NET.IF.IFALIAS.MATCHES}'
          value: (spy)
          description: 'Only interfaces with "spy" in alias'
        - macro: '{$NET.IF.IFALIAS.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
        - macro: '{$NET.IF.IFDESCR.MATCHES}'
          value: '.*'
        - macro: '{$NET.IF.IFDESCR.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
        - macro: '{$NET.IF.IFNAME.MATCHES}'
          value: '^.*$'
        - macro: '{$NET.IF.IFNAME.NOT_MATCHES}'
          value: '(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})'
          description: 'Filter out loopbacks, nulls, docker veth links and docker0 bridge by default'
        - macro: '{$NET.IF.IFOPERSTATUS.MATCHES}'
          value: '^.*$'
        - macro: '{$NET.IF.IFOPERSTATUS.NOT_MATCHES}'
          value: ^6$
          description: 'Ignore notPresent(6)'
        - macro: '{$NET.IF.IFTYPE.MATCHES}'
          value: '.*'
        - macro: '{$NET.IF.IFTYPE.NOT_MATCHES}'
          value: ^135$
          description: 'Ignore l2vlan(135)'
        - macro: '{$PSU_CRIT_STATUS}'
          value: '4'
        - macro: '{$SFPCHK.MATCHES}'
          value: (sfp)
          description: 'Only interfaces with "sfp" in alias'
        - macro: '{$SNMP.TIMEOUT}'
          value: 5m
        - macro: '{$SYS.DESCR.1}'
          value: DGS-1210-28/ME/A1
          description: 'This template for listed models'
        - macro: '{$SYS.DESCR.2}'
          value: DGS-1210-28/ME/A2
        - macro: '{$TEMP_CRIT}'
          value: '75'
        - macro: '{$TEMP_CRIT_LOW}'
          value: '5'
        - macro: '{$TEMP_WARN}'
          value: '65'
      dashboards:
        - uuid: d0f042fc73ca402a91c3521426b72b4c
          name: 'Network interfaces'
          pages:
            - widgets:
                - type: graphprototype
                  width: '24'
                  height: '5'
                  fields:
                    - type: INTEGER
                      name: columns
                      value: '1'
                    - type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        host: 'D-Link DGS-1210-28-ME Ax'
                        name: 'Interface {#IFNAME}({#IFALIAS}): Network traffic'
                    - type: INTEGER
                      name: rows
                      value: '1'
      valuemaps:
        - uuid: ddf85ab41cba4f68a04e35326bfe3a68
          name: 'EQUIPMENT-MIB::swFanStatus'
          mappings:
            - value: '0'
              newvalue: other
            - value: '1'
              newvalue: working
            - value: '2'
              newvalue: fail
            - value: '3'
              newvalue: speed-0
            - value: '4'
              newvalue: speed-low
            - value: '5'
              newvalue: speed-middle
            - value: '6'
              newvalue: speed-high
        - uuid: c3bfcf27983c4536b67ad947cc12036b
          name: 'EQUIPMENT-MIB::swPowerStatus'
          mappings:
            - value: '0'
              newvalue: other
            - value: '1'
              newvalue: lowVoltage
            - value: '2'
              newvalue: overCurrent
            - value: '3'
              newvalue: working
            - value: '4'
              newvalue: fail
            - value: '5'
              newvalue: connect
            - value: '6'
              newvalue: disconnect
        - uuid: 1a5d955e179f4875aabebeabc278b481
          name: 'EtherLike-MIB::dot3StatsDuplexStatus'
          mappings:
            - value: '1'
              newvalue: unknown
            - value: '2'
              newvalue: halfDuplex
            - value: '3'
              newvalue: fullDuplex
        - uuid: d65f85f999114c3694917feaa9d2eb42
          name: 'IF-MIB::ifOperStatus'
          mappings:
            - value: '1'
              newvalue: up
            - value: '2'
              newvalue: down
            - value: '4'
              newvalue: unknown
            - value: '5'
              newvalue: dormant
            - value: '6'
              newvalue: notPresent
            - value: '7'
              newvalue: lowerLayerDown
        - uuid: be15e165f5f54782b1bd1dd9ee1f796c
          name: 'IF-MIB::ifType'
          mappings:
            - value: '1'
              newvalue: other
            - value: '2'
              newvalue: regular1822
            - value: '3'
              newvalue: hdh1822
            - value: '4'
              newvalue: ddnX25
            - value: '5'
              newvalue: rfc877x25
            - value: '6'
              newvalue: ethernetCsmacd
            - value: '7'
              newvalue: iso88023Csmacd
            - value: '8'
              newvalue: iso88024TokenBus
            - value: '9'
              newvalue: iso88025TokenRing
            - value: '10'
              newvalue: iso88026Man
            - value: '11'
              newvalue: starLan
            - value: '12'
              newvalue: proteon10Mbit
            - value: '13'
              newvalue: proteon80Mbit
            - value: '14'
              newvalue: hyperchannel
            - value: '15'
              newvalue: fddi
            - value: '16'
              newvalue: lapb
            - value: '17'
              newvalue: sdlc
            - value: '18'
              newvalue: ds1
            - value: '19'
              newvalue: e1
            - value: '20'
              newvalue: basicISDN
            - value: '21'
              newvalue: primaryISDN
            - value: '22'
              newvalue: propPointToPointSerial
            - value: '23'
              newvalue: ppp
            - value: '24'
              newvalue: softwareLoopback
            - value: '25'
              newvalue: eon
            - value: '26'
              newvalue: ethernet3Mbit
            - value: '27'
              newvalue: nsip
            - value: '28'
              newvalue: slip
            - value: '29'
              newvalue: ultra
            - value: '30'
              newvalue: ds3
            - value: '31'
              newvalue: sip
            - value: '32'
              newvalue: frameRelay
            - value: '33'
              newvalue: rs232
            - value: '34'
              newvalue: para
            - value: '35'
              newvalue: arcnet
            - value: '36'
              newvalue: arcnetPlus
            - value: '37'
              newvalue: atm
            - value: '38'
              newvalue: miox25
            - value: '39'
              newvalue: sonet
            - value: '40'
              newvalue: x25ple
            - value: '41'
              newvalue: iso88022llc
            - value: '42'
              newvalue: localTalk
            - value: '43'
              newvalue: smdsDxi
            - value: '44'
              newvalue: frameRelayService
            - value: '45'
              newvalue: v35
            - value: '46'
              newvalue: hssi
            - value: '47'
              newvalue: hippi
            - value: '48'
              newvalue: modem
            - value: '49'
              newvalue: aal5
            - value: '50'
              newvalue: sonetPath
            - value: '51'
              newvalue: sonetVT
            - value: '52'
              newvalue: smdsIcip
            - value: '53'
              newvalue: propVirtual
            - value: '54'
              newvalue: propMultiplexor
            - value: '55'
              newvalue: ieee80212
            - value: '56'
              newvalue: fibreChannel
            - value: '57'
              newvalue: hippiInterface
            - value: '58'
              newvalue: frameRelayInterconnect
            - value: '59'
              newvalue: aflane8023
            - value: '60'
              newvalue: aflane8025
            - value: '61'
              newvalue: cctEmul
            - value: '62'
              newvalue: fastEther
            - value: '63'
              newvalue: isdn
            - value: '64'
              newvalue: v11
            - value: '65'
              newvalue: v36
            - value: '66'
              newvalue: g703at64k
            - value: '67'
              newvalue: g703at2mb
            - value: '68'
              newvalue: qllc
            - value: '69'
              newvalue: fastEtherFX
            - value: '70'
              newvalue: channel
            - value: '71'
              newvalue: ieee80211
            - value: '72'
              newvalue: ibm370parChan
            - value: '73'
              newvalue: escon
            - value: '74'
              newvalue: dlsw
            - value: '75'
              newvalue: isdns
            - value: '76'
              newvalue: isdnu
            - value: '77'
              newvalue: lapd
            - value: '78'
              newvalue: ipSwitch
            - value: '79'
              newvalue: rsrb
            - value: '80'
              newvalue: atmLogical
            - value: '81'
              newvalue: ds0
            - value: '82'
              newvalue: ds0Bundle
            - value: '83'
              newvalue: bsc
            - value: '84'
              newvalue: async
            - value: '85'
              newvalue: cnr
            - value: '86'
              newvalue: iso88025Dtr
            - value: '87'
              newvalue: eplrs
            - value: '88'
              newvalue: arap
            - value: '89'
              newvalue: propCnls
            - value: '90'
              newvalue: hostPad
            - value: '91'
              newvalue: termPad
            - value: '92'
              newvalue: frameRelayMPI
            - value: '93'
              newvalue: x213
            - value: '94'
              newvalue: adsl
            - value: '95'
              newvalue: radsl
            - value: '96'
              newvalue: sdsl
            - value: '97'
              newvalue: vdsl
            - value: '98'
              newvalue: iso88025CRFPInt
            - value: '99'
              newvalue: myrinet
            - value: '100'
              newvalue: voiceEM
            - value: '101'
              newvalue: voiceFXO
            - value: '102'
              newvalue: voiceFXS
            - value: '103'
              newvalue: voiceEncap
            - value: '104'
              newvalue: voiceOverIp
            - value: '105'
              newvalue: atmDxi
            - value: '106'
              newvalue: atmFuni
            - value: '107'
              newvalue: atmIma
            - value: '108'
              newvalue: pppMultilinkBundle
            - value: '109'
              newvalue: ipOverCdlc
            - value: '110'
              newvalue: ipOverClaw
            - value: '111'
              newvalue: stackToStack
            - value: '112'
              newvalue: virtualIpAddress
            - value: '113'
              newvalue: mpc
            - value: '114'
              newvalue: ipOverAtm
            - value: '115'
              newvalue: iso88025Fiber
            - value: '116'
              newvalue: tdlc
            - value: '117'
              newvalue: gigabitEthernet
            - value: '118'
              newvalue: hdlc
            - value: '119'
              newvalue: lapf
            - value: '120'
              newvalue: v37
            - value: '121'
              newvalue: x25mlp
            - value: '122'
              newvalue: x25huntGroup
            - value: '123'
              newvalue: trasnpHdlc
            - value: '124'
              newvalue: interleave
            - value: '125'
              newvalue: fast
            - value: '126'
              newvalue: ip
            - value: '127'
              newvalue: docsCableMaclayer
            - value: '128'
              newvalue: docsCableDownstream
            - value: '129'
              newvalue: docsCableUpstream
            - value: '130'
              newvalue: a12MppSwitch
            - value: '131'
              newvalue: tunnel
            - value: '132'
              newvalue: coffee
            - value: '133'
              newvalue: ces
            - value: '134'
              newvalue: atmSubInterface
            - value: '135'
              newvalue: l2vlan
            - value: '136'
              newvalue: l3ipvlan
            - value: '137'
              newvalue: l3ipxvlan
            - value: '138'
              newvalue: digitalPowerline
            - value: '139'
              newvalue: mediaMailOverIp
            - value: '140'
              newvalue: dtm
            - value: '141'
              newvalue: dcn
            - value: '142'
              newvalue: ipForward
            - value: '143'
              newvalue: msdsl
            - value: '144'
              newvalue: ieee1394
            - value: '145'
              newvalue: if-gsn
            - value: '146'
              newvalue: dvbRccMacLayer
            - value: '147'
              newvalue: dvbRccDownstream
            - value: '148'
              newvalue: dvbRccUpstream
            - value: '149'
              newvalue: atmVirtual
            - value: '150'
              newvalue: mplsTunnel
            - value: '151'
              newvalue: srp
            - value: '152'
              newvalue: voiceOverAtm
            - value: '153'
              newvalue: voiceOverFrameRelay
            - value: '154'
              newvalue: idsl
            - value: '155'
              newvalue: compositeLink
            - value: '156'
              newvalue: ss7SigLink
            - value: '157'
              newvalue: propWirelessP2P
            - value: '158'
              newvalue: frForward
            - value: '159'
              newvalue: rfc1483
            - value: '160'
              newvalue: usb
            - value: '161'
              newvalue: ieee8023adLag
            - value: '162'
              newvalue: bgppolicyaccounting
            - value: '163'
              newvalue: frf16MfrBundle
            - value: '164'
              newvalue: h323Gatekeeper
            - value: '165'
              newvalue: h323Proxy
            - value: '166'
              newvalue: mpls
            - value: '167'
              newvalue: mfSigLink
            - value: '168'
              newvalue: hdsl2
            - value: '169'
              newvalue: shdsl
            - value: '170'
              newvalue: ds1FDL
            - value: '171'
              newvalue: pos
            - value: '172'
              newvalue: dvbAsiIn
            - value: '173'
              newvalue: dvbAsiOut
            - value: '174'
              newvalue: plc
            - value: '175'
              newvalue: nfas
            - value: '176'
              newvalue: tr008
            - value: '177'
              newvalue: gr303RDT
            - value: '178'
              newvalue: gr303IDT
            - value: '179'
              newvalue: isup
            - value: '180'
              newvalue: propDocsWirelessMaclayer
            - value: '181'
              newvalue: propDocsWirelessDownstream
            - value: '182'
              newvalue: propDocsWirelessUpstream
            - value: '183'
              newvalue: hiperlan2
            - value: '184'
              newvalue: propBWAp2Mp
            - value: '185'
              newvalue: sonetOverheadChannel
            - value: '186'
              newvalue: digitalWrapperOverheadChannel
            - value: '187'
              newvalue: aal2
            - value: '188'
              newvalue: radioMAC
            - value: '189'
              newvalue: atmRadio
            - value: '190'
              newvalue: imt
            - value: '191'
              newvalue: mvl
            - value: '192'
              newvalue: reachDSL
            - value: '193'
              newvalue: frDlciEndPt
            - value: '194'
              newvalue: atmVciEndPt
            - value: '195'
              newvalue: opticalChannel
            - value: '196'
              newvalue: opticalTransport
            - value: '197'
              newvalue: propAtm
            - value: '198'
              newvalue: voiceOverCable
            - value: '199'
              newvalue: infiniband
            - value: '200'
              newvalue: teLink
            - value: '201'
              newvalue: q2931
            - value: '202'
              newvalue: virtualTg
            - value: '203'
              newvalue: sipTg
            - value: '204'
              newvalue: sipSig
            - value: '205'
              newvalue: docsCableUpstreamChannel
            - value: '206'
              newvalue: econet
            - value: '207'
              newvalue: pon155
            - value: '208'
              newvalue: pon622
            - value: '209'
              newvalue: bridge
            - value: '210'
              newvalue: linegroup
            - value: '211'
              newvalue: voiceEMFGD
            - value: '212'
              newvalue: voiceFGDEANA
            - value: '213'
              newvalue: voiceDID
            - value: '214'
              newvalue: mpegTransport
            - value: '215'
              newvalue: sixToFour
            - value: '216'
              newvalue: gtp
            - value: '217'
              newvalue: pdnEtherLoop1
            - value: '218'
              newvalue: pdnEtherLoop2
            - value: '219'
              newvalue: opticalChannelGroup
            - value: '220'
              newvalue: homepna
            - value: '221'
              newvalue: gfp
            - value: '222'
              newvalue: ciscoISLvlan
            - value: '223'
              newvalue: actelisMetaLOOP
            - value: '224'
              newvalue: fcipLink
            - value: '225'
              newvalue: rpr
            - value: '226'
              newvalue: qam
            - value: '227'
              newvalue: lmp
            - value: '228'
              newvalue: cblVectaStar
            - value: '229'
              newvalue: docsCableMCmtsDownstream
            - value: '230'
              newvalue: adsl2
            - value: '231'
              newvalue: macSecControlledIF
            - value: '232'
              newvalue: macSecUncontrolledIF
            - value: '233'
              newvalue: aviciOpticalEther
            - value: '234'
              newvalue: atmbond
            - value: '235'
              newvalue: voiceFGDOS
            - value: '236'
              newvalue: mocaVersion1
            - value: '237'
              newvalue: ieee80216WMAN
            - value: '238'
              newvalue: adsl2plus
            - value: '239'
              newvalue: dvbRcsMacLayer
            - value: '240'
              newvalue: dvbTdm
            - value: '241'
              newvalue: dvbRcsTdma
            - value: '242'
              newvalue: x86Laps
            - value: '243'
              newvalue: wwanPP
            - value: '244'
              newvalue: wwanPP2
            - value: '245'
              newvalue: voiceEBS
            - value: '246'
              newvalue: ifPwType
            - value: '247'
              newvalue: ilan
            - value: '248'
              newvalue: pip
            - value: '249'
              newvalue: aluELP
            - value: '250'
              newvalue: gpon
            - value: '251'
              newvalue: vdsl2
            - value: '252'
              newvalue: capwapDot11Profile
            - value: '253'
              newvalue: capwapDot11Bss
            - value: '254'
              newvalue: capwapWtpVirtualRadio
            - value: '255'
              newvalue: bits
            - value: '256'
              newvalue: docsCableUpstreamRfPort
            - value: '257'
              newvalue: cableDownstreamRfPort
            - value: '258'
              newvalue: vmwareVirtualNic
            - value: '259'
              newvalue: ieee802154
            - value: '260'
              newvalue: otnOdu
            - value: '261'
              newvalue: otnOtu
            - value: '262'
              newvalue: ifVfiType
            - value: '263'
              newvalue: g9981
            - value: '264'
              newvalue: g9982
            - value: '265'
              newvalue: g9983
            - value: '266'
              newvalue: aluEpon
            - value: '267'
              newvalue: aluEponOnu
            - value: '268'
              newvalue: aluEponPhysicalUni
            - value: '269'
              newvalue: aluEponLogicalLink
            - value: '270'
              newvalue: aluGponOnu
            - value: '271'
              newvalue: aluGponPhysicalUni
            - value: '272'
              newvalue: vmwareNicTeam
            - value: '277'
              newvalue: docsOfdmDownstream
            - value: '278'
              newvalue: docsOfdmaUpstream
            - value: '279'
              newvalue: gfast
            - value: '280'
              newvalue: sdci
            - value: '281'
              newvalue: xboxWireless
            - value: '282'
              newvalue: fastdsl
            - value: '283'
              newvalue: docsCableScte55d1FwdOob
            - value: '284'
              newvalue: docsCableScte55d1RetOob
            - value: '285'
              newvalue: docsCableScte55d2DsOob
            - value: '286'
              newvalue: docsCableScte55d2UsOob
            - value: '287'
              newvalue: docsCableNdf
            - value: '288'
              newvalue: docsCableNdr
            - value: '289'
              newvalue: ptm
            - value: '290'
              newvalue: ghn
        - uuid: 50080fce91904479a660b7fe605e90d9
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
        - uuid: 18ff2c98403648f58dfdc27bfafd8a32
          name: zabbix.host.available
          mappings:
            - value: '0'
              newvalue: 'not available'
            - value: '1'
              newvalue: available
            - value: '2'
              newvalue: unknown
  triggers:
    - uuid: f8299f46621c4e3ca6cc1bb968299a7b
      expression: '(last(/D-Link DGS-1210-28-ME Ax/system.hw.uptime[hrSystemUptime.0])>0 and last(/D-Link DGS-1210-28-ME Ax/system.hw.uptime[hrSystemUptime.0])<10m) or (last(/D-Link DGS-1210-28-ME Ax/system.hw.uptime[hrSystemUptime.0])=0 and last(/D-Link DGS-1210-28-ME Ax/system.net.uptime[sysUpTime.0])<10m)'
      name: 'Host has been restarted'
      event_name: '{HOST.NAME} has been restarted (uptime < 10m)'
      priority: WARNING
      description: 'Uptime is less than 10 minutes.'
      manual_close: 'YES'
      dependencies:
        - name: 'No SNMP data collection'
          expression: 'max(/D-Link DGS-1210-28-ME Ax/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
      tags:
        - tag: scope
          value: notice
  graphs:
    - uuid: fb20a3a37b78411a89245ab43eb11e14
      name: 'CPU utilization'
      ymin_type_1: FIXED
      ymax_type_1: FIXED
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'D-Link DGS-1210-28-ME Ax'
            key: system.cpu.util
